 <!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GTA SAMP Community + Login System</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
/* ==== STYLE SAMA SEPERTI SEBELUMNYA ==== */
:root {
  --primary: #1f1f1f;
  --secondary: #2c2c2c;
  --accent: #ff3c3c;
  --text: #fff;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Roboto',sans-serif;background:var(--primary);color:var(--text);}
header{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background:var(--secondary);}
header h1{font-size:1.8rem;color:var(--accent);}
nav a{color:#fff;margin-left:1rem;text-decoration:none;}

.hero{height:70vh;display:flex;justify-content:center;align-items:center;position:relative;background:url('https://i.imgur.com/8JfK7Hq.jpg') center/cover;}
.hero::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);}
.hero-content{position:relative;z-index:3;text-align:center;}
.hero-content h2{font-size:3rem;margin-bottom:1rem;}
.hero-content a{background:var(--accent);padding:1rem 2rem;border-radius:6px;color:#fff;text-decoration:none;}

section{max-width:1200px;margin:auto;padding:3rem 2rem;}
.section-title{text-align:center;font-size:2rem;margin-bottom:2rem;color:var(--accent);}

.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;}
.card{background:var(--secondary);padding:1.5rem;border-radius:10px;}

.chat-box{background:#2c2c2c;height:300px;border-radius:10px;overflow-y:auto;padding:1rem;margin-bottom:1rem;}
.chat-input{padding:0.7rem;width:100%;border-radius:5px;border:none;background:#444;color:#fff;}

button.login-btn{
  padding:0.5rem 1.2rem;
  background:var(--accent);
  border:none;
  color:#fff;
  border-radius:5px;
  cursor:pointer;
}

/* ==== POPUP LOGIN ==== */
#loginPopup{
  position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.7);
  display:flex;justify-content:center;align-items:center;
  z-index:999;display:none;
}
.popup-box{
  background:var(--secondary);
  padding:2rem;
  width:320px;
  border-radius:10px;
  text-align:center;
}
.popup-box input{
  width:100%;padding:0.8rem;margin:0.6rem 0;
  border-radius:5px;border:none;
  background:#333;color:#fff;
}
.popup-box button{
  width:100%;padding:0.7rem;background:var(--accent);
  border:none;color:#fff;margin-top:1rem;border-radius:5px;
}
</style>
</head>
<body>

<header>
  <h1>GTA SAMP</h1>
  <nav>
    <a href="#servers">Servers</a>
    <a href="#events">Events</a>
    <a href="#leaderboard">Leaderboard</a>
    <a href="#chat">Global Chat</a>
    <button class="login-btn" id="loginBtn">Login</button>
    <button class="login-btn" id="logoutBtn" style="display:none;background:#555;">Logout</button>
  </nav>
</header>

<!-- HERO -->
<section class="hero">
  <div class="hero-content">
    <h2>Komunitas GTA SAMP</h2>
    <p>Server aktif, event seru, dan komunitas besar</p>
    <a href="#servers">Lihat Server</a>
  </div>
</section>

<!-- SERVER LIST -->
<section id="servers">
  <h2 class="section-title">Daftar Server</h2>
  <div class="grid">
    <div class="card"><h3>Los Santos RP</h3><p>IP: samp1.example.com</p></div>
    <div class="card"><h3>Freeroam Indo</h3><p>IP: samp2.example.com</p></div>
    <div class="card"><h3>Gang Wars</h3><p>IP: samp3.example.com</p></div>
  </div>
</section>

<!-- GLOBAL CHAT -->
<section id="chat">
  <h2 class="section-title">Global Chat</h2>

  <div class="card">
    <div id="chat-box" class="chat-box"></div>
    <input id="chat-input" class="chat-input" placeholder="Login untuk mengirim pesan..." disabled>
  </div>
</section>

<footer>
  <p>&copy; 2025 GTA SAMP Community</p>
</footer>

<!-- POPUP LOGIN -->
<div id="loginPopup">
  <div class="popup-box">
    <h2>Login / Daftar</h2>
    <input type="text" id="nicknameInput" placeholder="Masukkan Nickname">
    <button onclick="login()">Masuk</button>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// =============== FIREBASE CONFIG (ISI SENDIRI) ==================
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJECT_ID.firebaseapp.com",
  databaseURL: "https://PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "PROJECT_ID",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ================= LOGIN SYSTEM ==================
const loginPopup = document.getElementById("loginPopup");
const loginBtn = document.getElementById("loginBtn");
const logoutBtn = document.getElementById("logoutBtn");
const chatInput = document.getElementById("chat-input");

let username = localStorage.getItem("username");

// Jika belum login â†’ tampilkan popup otomatis
if (!username) {
  loginPopup.style.display = "flex";
  chatInput.disabled = true;
}

// Jika sudah login
if (username) {
  loginBtn.style.display = "none";
  logoutBtn.style.display = "block";
  chatInput.disabled = false;
  chatInput.placeholder = "Ketik pesan...";
}

loginBtn.onclick = () => { loginPopup.style.display = "flex"; };

function login() {
  const nick = document.getElementById("nicknameInput").value.trim();
  if (nick.length < 3) return alert("Nickname minimal 3 huruf!");

  localStorage.setItem("username", nick);
  username = nick;
  loginPopup.style.display = "none";
  chatInput.disabled = false;
  loginBtn.style.display = "none";
  logoutBtn.style.display = "block";
  chatInput.placeholder = "Ketik pesan...";
}

logoutBtn.onclick = () => {
  localStorage.removeItem("username");
  location.reload();
};

// ================= CHAT SYSTEM ==================
const chatBox = document.getElementById("chat-box");

chatInput.addEventListener("keypress", (e) => {
  if (e.key === "Enter" && chatInput.value.trim() !== "") {
    if (!username) return alert("Harap login terlebih dahulu!");
    const msg = {
      user: username,
      text: chatInput.value,
      time: Date.now(),
    };
    db.ref("global_chat").push(msg);
    chatInput.value = "";
  }
});

// Display chat
db.ref("global_chat").on("child_added", (snapshot) => {
  const msg = snapshot.val();
  const div = document.createElement("div");
  const t = new Date(msg.time);
  div.innerHTML = `<b style="color:#ff3c3c">${msg.user}</b>: ${msg.text}`;
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollHeight;
});
</script>

</body>
</html>